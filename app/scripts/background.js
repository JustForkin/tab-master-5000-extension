!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";var n=function(e){chrome.runtime.sendMessage(chrome.runtime.id,e,function(e){})},o=function(e){console.log("Reload background script. Reason: ",e),location.reload()};chrome.tabs.onCreated.addListener(function(e,t){n({e:e,type:"create"})}),chrome.tabs.onRemoved.addListener(function(e,t){n({e:e,type:"remove"})}),chrome.tabs.onActivated.addListener(function(e,t){n({e:e,type:"activate"})}),chrome.tabs.onUpdated.addListener(function(e,t){n({e:e,type:"update"})}),chrome.tabs.onMoved.addListener(function(e,t){n({e:e,type:"move"})}),chrome.tabs.onAttached.addListener(function(e,t){n({e:e,type:"attach"})}),chrome.tabs.onDetached.addListener(function(e,t){n({e:e,type:"detach"})}),chrome.runtime.onUpdateAvailable.addListener(function(e){console.log("onUpdateAvailable: ",e),setTimeout(function(){n({e:e,type:"newVersion"})},500)}),chrome.runtime.onInstalled.addListener(function(e){console.log("onInstalled: ",e),("update"===e.reason||"install"===e.reason)&&(chrome.tabs.query({title:"New Tab"},function(e){for(var t=0;t<e.length;t++)chrome.tabs.remove(e[t].id)}),chrome.tabs.create({active:!0},function(t){setTimeout(function(){"install"===e.reason?n({e:e,type:"installed"}):"update"===e.reason&&n({e:e,type:"versionUpdate"})},500)}))}),chrome.runtime.onMessage.addListener(function(e,t,r){if("captureTabs"===e.method){var a=new Promise(function(e,t){chrome.tabs.captureVisibleTab({format:"jpeg",quality:25},function(n){n?e(n):t()})});a.then(function(e){console.log(e),r({image:e})})["catch"](function(){n({e:null,type:"error"}),o("Screenshot capture error.")})}else"close"===e.method?chrome.tabs.remove(t.tab.id):"reload"===e.method&&o("Screenshot reloading condition triggered from tile.js.");return!0})}]);